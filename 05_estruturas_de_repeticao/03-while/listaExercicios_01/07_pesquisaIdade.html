<meta charset="UTF-8" />
<script>
  /*
    PROBLEMA: PESQUISA DE IDADE
    Foi feita uma pesquisa entre os habitantes de uma região. Foram coletados os dados de idade, sexo (M/F) e salário. Faça um programa que calcule e mostre:

    a) A média dos salários do grupo;
    b) A maior e a menor idade do grupo;
    c) A quantidade de mulheres na região;
    d) A idade e o sexo da pessoa que possui o menor salário;

    Finalize a entrada de dados ao ser digitada uma idade negativa.
  */

  let hab = Number(prompt("Número de habitantes:"));
  let pessoas = [];

  for (let i = 0; i < hab; i++) {
    let nome = prompt(`Nome da pessoa ${i + 1}:`);
    let idd = Number(prompt(`Idade da pessoa ${i + 1}:`));
    if (idd < 0) break;
    let sexo = prompt(`Sexo da pessoa ${i + 1} (M/F):`).toUpperCase().trim().charAt(0);
    let salario = Number(prompt(`Salário da pessoa ${i + 1}:`));

    pessoas.push({
      nome,
      idd,
      sexo,
      salario,
      saida: function () {
        return `\nNome: ${this.nome}\nIdade: ${this.idd}\nSexo: ${this.sexo}\nSalário: R$${this.salario.toFixed(2)}\n`;
      },
    });
  }

  if (pessoas.length === 0) {
    alert("Nenhum dado válido foi inserido.");
  } else {
    // Média salarial
    let totalSalarios = 0;
    let mulheres = 0;

    for (let pessoa of pessoas) {
      totalSalarios += pessoa.salario;
      if (pessoa.sexo === "F") mulheres++;
    }

    let mediaSalarial = totalSalarios / pessoas.length;

    // Maior e menor idade
    pessoas.sort((a, b) => a.idd - b.idd);
    let menorIdade = pessoas[0].idd;
    let maiorIdade = pessoas[pessoas.length - 1].idd;

    // Menor salário
    pessoas.sort((a, b) => a.salario - b.salario);
    let menorSalario = pessoas[0];

    // Dados gerais
    let dadosGerais = "";
    for (let pessoa of pessoas) {
      dadosGerais += pessoa.saida();
    }

    alert(
      `Média salarial: R$${mediaSalarial.toFixed(2)}\n` +
      `Maior idade: ${maiorIdade}\nMenor idade: ${menorIdade}\n` +
      `Quantidade de mulheres: ${mulheres}\n` +
      `Pessoa com menor salário:\n${menorSalario.saida()}\n` +
      `----- Dados gerais de todos -----\n${dadosGerais}`
    );
  }
  // by careca e jazz
</script>