<meta charset="UTF-8" />
<script>
  /*
    PROBLEMA: PESQUISA DE IDADE
    Foi feita uma pesquisa entre os habitantes de uma região. Foram coletados os dados de idade, sexo (M/F) e salário. Faça um programa que calcule e mostre:

    a) A média dos salários do grupo;
    b) A maior e a menor idade do grupo;
    c) A quantidade de mulheres na região;
    d) A idade e o sexo da pessoa que possui o menor salário;

    Finalize a entrada de dados ao ser digitada uma idade negativa.
  */

  let pessoas = [];

  while (true) {
    let nome = prompt("Nome da pessoa:");
    let idd = Number(prompt("Idade da pessoa:"));
    if (idd <= 0) break;
    let sexo = prompt("Sexo da pessoa (M/F):").toUpperCase().trim().charAt(0);
    let salario = Number(prompt("Salário da pessoa:"));

    pessoas.push({
      nome,
      idd,
      sexo,
      salario,
      saida: function () {
        return `\nNome: ${this.nome}\nIdade: ${this.idd}\nSexo: ${this.sexo}\nSalário: R$${this.salario.toFixed(2)}\n`;
      },
    });
  }

  if (pessoas.length === 0) {
    alert("Nenhum dado válido foi inserido.");
  } else {
    // Média salarial e quantidade de mulheres
    let totalSalarios = 0;
    let mulheres = 0;
    let maiorIdade = pessoas[0].idd;
    let menorIdade = pessoas[0].idd;
    let menorSalario = pessoas[0];

    let i = 0;
    while (i < pessoas.length) {
      let pessoa = pessoas[i];
      totalSalarios += pessoa.salario;
      if (pessoa.sexo === "F") mulheres++;
      if (pessoa.idd > maiorIdade) maiorIdade = pessoa.idd;
      if (pessoa.idd < menorIdade) menorIdade = pessoa.idd;
      if (pessoa.salario < menorSalario.salario) menorSalario = pessoa;
      i++;
    }

    let mediaSalarial = totalSalarios / pessoas.length;

    // Dados gerais
    let dadosGerais = "";
    for (let pessoa of pessoas) {
      dadosGerais += pessoa.saida();
    }

    alert(
      `Média salarial: R$${mediaSalarial.toFixed(2)}\n` +
      `Maior idade: ${maiorIdade}\nMenor idade: ${menorIdade}\n` +
      `Quantidade de mulheres: ${mulheres}\n` +
      `Pessoa com menor salário:\n${menorSalario.saida()}\n` +
      `----- Dados gerais de todos -----\n${dadosGerais}`
    );
  }
  // by careca e jazz
</script>