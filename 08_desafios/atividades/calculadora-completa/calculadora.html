<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora</title>
    <link rel="stylesheet" href="calculadora.css" />
  </head>
  <body>
    <!-- Overlay e Menu lateral -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="menu-lateral" id="menuLateral">
      <div class="menu-secao">
        <div class="menu-titulo">Calculadora</div>
        <div class="menu-opcao ativo" data-opcao="padrao">
          <span class="menu-opcao-texto"><span class="icon-funcao"><svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M5 9H19M15 18V15M9 18H9.01M12 18H12.01M12 15H12.01M9 15H9.01M15 12H15.01M12 12H12.01M9 12H9.01M8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V6.2C19 5.0799 19 4.51984 18.782 4.09202C18.5903 3.71569 18.2843 3.40973 17.908 3.21799C17.4802 3 16.9201 3 15.8 3H8.2C7.0799 3 6.51984 3 6.09202 3.21799C5.71569 3.40973 5.40973 3.71569 5.21799 4.09202C5 4.51984 5 5.07989 5 6.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21Z"
                    stroke="#ffffff"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"></path>
                </g></svg></span>
            Padrão</span>
        </div>
        <div class="menu-opcao" data-opcao="cientifica">
          <span class="menu-opcao-texto"><span class="icon-funcao"><svg
                viewBox="0 0 24 24"
                id="Layer_1"
                data-name="Layer 1"
                xmlns="http://www.w3.org/2000/svg"
                fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <defs>
                    <style>
                      .cls-1 {
                        fill: none;
                        stroke: #ffffff;
                        stroke-miterlimit: 10;
                        stroke-width: 1.91px;
                      }
                    </style>
                  </defs>
                  <line
                    class="cls-1"
                    x1="7.23"
                    y1="1.5"
                    x2="16.77"
                    y2="1.5"></line>
                  <path
                    class="cls-1"
                    d="M14.86,6.27V1.5H9.14V6.27L2.7,19.15a2.3,2.3,0,0,0-.25,1h0A2.32,2.32,0,0,0,4.77,22.5H19.23a2.32,2.32,0,0,0,2.32-2.32h0a2.3,2.3,0,0,0-.25-1Z"></path>
                  <path
                    class="cls-1"
                    d="M6.89,10.76c5-2.17,5.31,1.9,10.42.41"></path>
                  <line
                    class="cls-1"
                    x1="7.23"
                    y1="18.68"
                    x2="9.14"
                    y2="18.68"></line>
                  <line
                    class="cls-1"
                    x1="10.09"
                    y1="14.86"
                    x2="12"
                    y2="14.86"></line>
                  <line
                    class="cls-1"
                    x1="14.86"
                    y1="16.77"
                    x2="16.77"
                    y2="16.77"></line>
                </g></svg></span>
            Científica</span>
        </div>
        <div class="menu-opcao" data-opcao="grafica">
          <span class="menu-opcao-texto">
            <span class="icon-funcao">
              <svg fill="#ffffff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32.167 32.167" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M32.167,29.828l-3.185-1.993v1.35H3.943L20.958,12.17l1.351,1.349l1.211-5.28l-5.281,1.213l1.353,1.351L2.64,27.751V3.527 h1.35L1.995,0.343L0,3.527h1.35v26.947h27.634v1.35L32.167,29.828z M2.64,29.035l0.148,0.148H2.64V29.035z"></path> </g> </g></svg>
            </span> Representação Grafica</span>
        </div>
      </div>
    </div>

    <!-- Container principal -->
    <div class="calculadora modo-padrao" id="calculadora">
      <!-- Cabeçalho -->
      <div class="cabecalho">
        <button class="icon-btn menu-icon" id="menuIcon">☰</button>
        <span class="titulo" id="titulo">Padrão</span>
        <span class="icone-rel">⏱️</span>
      </div>

      <!-- Display comum -->
      <div class="display-container">
        <input id="display" class="display" type="text" value="0" />
      </div>
      <!-- Memória -->
      <div class="memory-buttons">
        <button class="memory-btn">MC</button>
        <button class="memory-btn">MR</button>
        <button class="memory-btn">M+</button>
        <button class="memory-btn">M-</button>
        <button class="memory-btn">MS</button>
        <button class="memory-btn">Mv</button>
      </div>

      <!-- Controles extras da científica (visíveis só no modo científico) -->
      <div class="secao-cientifica" aria-hidden="true">
        <div class="grupo">
          <button class="secao-btn">Trigonometria ▼</button>
          <button class="secao-btn">Função ▼</button>
        </div>
        <div class="sub-opcoes"><span>DEG</span><span>F-E</span></div>
      </div>

      <!-- GRID PADRÃO (4 colunas) -->
      <div class="botoes botoes-padrao" id="secaoPadrao">
        <button class="funcao" id="percent" title="Porcentagem">%</button>
        <button class="funcao" id="ce" title="Limpar Tudo">CE</button>
        <button class="funcao" id="limpar" title="Limpar">C</button>
        <button class="funcao" id="apagar" title="Apagar">⌫</button>

        <button
          class="funcao"
          id="reciprocal"
          title="Número 1 dividido pelo quociente">
          1/x
        </button>
        <button class="funcao" id="square" title="Eleva ao Quadrado">x²</button>
        <button class="funcao" id="sqrt" title="Raiz Quadrada">²√x</button>
        <button class="operacao" id="divide" title="Divisão">÷</button>

        <button class="numero" value="7">7</button>
        <button class="numero" value="8">8</button>
        <button class="numero" value="9">9</button>
        <button class="operacao" id="multiply" title="Multiplicação">×</button>

        <button class="numero" value="4">4</button>
        <button class="numero" value="5">5</button>
        <button class="numero" value="6">6</button>
        <button class="operacao" id="subtract" title="Subtração">-</button>

        <button class="numero" value="1">1</button>
        <button class="numero" value="2">2</button>
        <button class="numero" value="3">3</button>
        <button class="operacao" id="add" title="Adição">+</button>

        <button class="funcao" id="plusminus" title="Inverter sinal">
          +/-
        </button>
        <button class="numero" value="0">0</button>
        <button class="numero" value=",">,</button>
        <button class="operacao igual" id="resultado" title="Igual">=</button>
      </div>

      <!-- GRID CIENTÍFICA (5 colunas) -->
      <div
        class="botoes botoes-cientifica"
        id="secaoCientifica"
        aria-hidden="true">
        <!-- Linha 1 -->
        <button class="funcao" title="2 elevado à potência">2ⁿᵈ</button>
        <button class="funcao" title="Constante Pi">π</button>
        <button class="funcao" title="Constante de Euler">e</button>
        <button class="funcao" id="limpar_c" title="Limpar">C</button>
        <button class="funcao" id="apagar_c" title="Apagar">⌫</button>

        <!-- Linha 2 -->
        <button class="funcao" id="square_c" title="Potência">x²</button>
        <button class="funcao" id="reciprocal_c" title="Recíproco">1/x</button>
        <button class="funcao" title="Valor absoluto">|x|</button>
        <button class="funcao" title="Exponencial">exp</button>
        <button class="funcao" title="Módulo">mod</button>

        <!-- Linha 3 -->
        <button class="funcao" id="sqrt_c" title="Raiz quadrada">²√x</button>
        <button class="operacao">(</button>
        <button class="operacao">)</button>
        <button class="funcao" id="fatorialBtn" title="Fatorial">n!</button>
        <button class="operacao" id="divide_c" title="Divisão">÷</button>

        <!-- Linha 4 -->
        <button class="funcao" title="Potência">xʸ</button>
        <button class="numero" value="7">7</button>
        <button class="numero" value="8">8</button>
        <button class="numero" value="9">9</button>
        <button class="operacao" id="multiply_c" title="Multiplicação">
          ×
        </button>

        <!-- Linha 5 -->
        <button class="funcao" title="10 elevado à potência">10ˣ</button>
        <button class="numero" value="4">4</button>
        <button class="numero" value="5">5</button>
        <button class="numero" value="6">6</button>
        <button class="operacao" id="subtract_c" title="Subtração">-</button>

        <!-- Linha 6 -->
        <button class="funcao" title="Logaritmo base 10">log</button>
        <button class="numero" value="1">1</button>
        <button class="numero" value="2">2</button>
        <button class="numero" value="3">3</button>
        <button class="operacao" id="add_c" title="Adição">+</button>

        <!-- Linha 7 -->
        <button class="funcao" title="Logaritmo natural">ln</button>
        <button class="funcao" disabled></button>
        <button class="numero" value="0">0</button>
        <button class="numero" value=",">,</button>
        <button class="operacao igual" id="resultado_c" title="Igual">=</button>
      </div>
    </div>
    
    <!-- === Painel de Representação Gráfica === -->
    <div class="graph-container" id="graphContainer">
    <div class="graph-header">
        <div class="graph-title">Representação Gráfica</div>
        <div style="display:flex; gap:8px; align-items:center;">
          <button id="graphOptionsToggle" class="chip">Opções</button>
          <button onclick="fecharGrafico()" class="chip">Voltar</button>
        </div>
    </div>

    <div class="graph-builder">
        <div class="expr-left">
            <label class="expr-label">f(x) =</label>
            <input id="exprInput" class="expr-input" placeholder="Digite a função">
        </div>
        <div class="expr-right">
            <button class="chip" onclick="plot()">Plotar</button>
            <button id="zoomIn" class="chip">Zoom +</button>
            <button id="zoomOut" class="chip">Zoom -</button>
            <button id="centerBtn" class="chip">Centro</button>
        </div>
    </div>

    <div class="graph-frame" id="graphFrame">
        <canvas id="graphCanvas"></canvas>
    </div>
    
    <!-- Painel de Opções do Gráfico -->
    <div class="graph-options" id="graphOptions" aria-hidden="true">
      <div class="options-title">Opções de gráfico</div>
      <div class="option-grid">
        <div class="field"><label>X-Mín.</label><input id="xMin" type="number" step="0.1" value="-10"></div>
        <div class="field"><label>X-Máx.</label><input id="xMax" type="number" step="0.1" value="10"></div>
        <div class="field"><label>Y-Mín.</label><input id="yMin" type="number" step="0.1" value="-10"></div>
        <div class="field"><label>Y-Máx.</label><input id="yMax" type="number" step="0.1" value="10"></div>
      </div>

      <div class="options-group">
        <div class="options-label">Unidades</div>
        <div class="toggle">
          <button id="unitsRad" class="toggle-btn ativo">Radianos</button>
          <button id="unitsDeg" class="toggle-btn">Graus</button>
          <button id="unitsGrad" class="toggle-btn">Grados</button>
        </div>
      </div>

      <div class="options-group">
        <label for="lineWidth">Espessura da linha</label>
        <input id="lineWidth" type="range" min="1" max="6" value="2">
      </div>

      <div class="options-group">
        <div class="options-label">Tema do Graph</div>
        <div class="toggle">
          <button id="themeLight" class="toggle-btn ativo">Sempre claro</button>
          <button id="themeDark" class="toggle-btn">Escuro</button>
        </div>
      </div>
    </div>
    </div>


    <!-- Biblioteca Math.js para avaliar expressões f(x) -->
    <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>
    <script src="calculadora.js"></script>
  </body>
</html>
